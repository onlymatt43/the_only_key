<!DOCTYPE html>
<html>
<head><title>Enter Token</title></head>
<body style="background:black;color:white;text-align:center;padding-top:100px;">
    <h1>Enter your access code</h1>
    <form id="unlock-form" method="POST" style="margin-bottom:18px;">
        <input type="text" name="token" required placeholder="Enter or scan your code">
        <button type="submit" style="padding:10px 24px;font-size:1.1em;">Unlock now</button>
    </form>
    <div style="color:#0a8;font-size:1em;margin-bottom:12px;">This will unlock any device using the same IP address.<br>Access time starts now.</div>
    {% if error %}
        <p style="color:red;">Invalid token. Try again.</p>
    {% endif %}
</body>
<script>
// Génère un identifiant unique simple
function generateDeviceId() {
    return 'dev-' + Math.random().toString(36).substr(2, 16) + Date.now();
}
// Place le cookie device_id s'il n'existe pas déjà
function setDeviceIdCookie() {
    if (!document.cookie.split('; ').find(row => row.startsWith('device_id='))) {
        var id = generateDeviceId();
        document.cookie = 'device_id=' + id + '; path=/; max-age=31536000';
    }
}
setDeviceIdCookie();
</script>
</html>